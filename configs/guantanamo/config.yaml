domain: "guantanamo"
description: "Guant√°namo Bay detention and related issues"

# Data source configuration
data_sources:
  default_path: "data/guantanamo/raw_sources/miami_herald_articles.parquet"

# Output configuration  
output:
  directory: "data/guantanamo/entities"

# Legacy similarity threshold (superseded by dedup section below)
similarity_threshold: 0.75

# Deduplication configuration
dedup:
  similarity_thresholds:
    default: 0.75
    people: 0.82
    organizations: 0.78
    locations: 0.80
    events: 0.76
  lexical_blocking:
    enabled: true
    threshold: 60        # RapidFuzz score cutoff (0-100)
    max_candidates: 50   # max entities to run cosine similarity against
  name_variants:
    organizations:
      equivalence_groups:
        - ["Department of Defense", "Defense Department", "DoD", "Pentagon"]
        - ["Department of Justice", "Justice Department", "DoJ"]
        - ["Department of Homeland Security", "Homeland Security", "DHS"]
        - ["Department of State", "State Department"]
        - ["Immigration and Customs Enforcement", "ICE"]
        - ["Customs and Border Protection", "CBP"]
        - ["Central Intelligence Agency", "CIA"]
        - ["Federal Bureau of Investigation", "FBI"]
        - ["National Security Agency", "NSA"]
        - ["Defense Intelligence Agency", "DIA"]
        - ["Joint Task Force Guantanamo", "JTF-GTMO", "JTF GTMO"]
        - ["American Civil Liberties Union", "ACLU"]
        - ["International Committee of the Red Cross", "ICRC", "Red Cross"]
        - ["United Nations", "UN", "U.N."]
    locations:
      equivalence_groups:
        - ["Guantanamo Bay", "Guantanamo", "GTMO", "Naval Station Guantanamo Bay", "Guantanamo Bay Naval Base"]
        - ["United States", "U.S.", "US"]

# Merge evidence configuration (for evidence-first similarity search)
merge_evidence:
  max_chars: 1500         # truncate evidence text to this length
  window_chars: 240       # characters per context window around entity mentions
  max_windows: 3          # max context windows to extract from article

# Processing configuration
processing:
  # Enable relevance checking before extraction
  relevance_check: true
  
  # Batch size for processing articles
  batch_size: 5

# Embeddings configuration
embeddings:
  mode: cloud  # Options: auto, local, cloud, hybrid
  cloud:
    model: jina_ai/jina-embeddings-v3
    batch_size: 100
    max_retries: 3
    timeout: 30
  local:
    model: sentence-transformers/all-MiniLM-L6-v2
    batch_size: 32
    device: auto  # auto|cpu|cuda|mps