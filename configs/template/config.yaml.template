domain: "{DOMAIN_NAME}"
description: "{DOMAIN_DESCRIPTION}"

# Data source configuration
data_sources:
  default_path: "data/{DOMAIN_NAME}/raw_sources/{DOMAIN_NAME}_articles.parquet"

# Output configuration  
output:
  directory: "data/{DOMAIN_NAME}/entities"

# Legacy similarity threshold (superseded by dedup section below)
similarity_threshold: 0.75

# Deduplication configuration
dedup:
  similarity_thresholds:
    default: 0.75
    people: 0.82
    organizations: 0.78
    locations: 0.80
    events: 0.76
  lexical_blocking:
    enabled: true
    threshold: 60        # RapidFuzz score cutoff (0-100)
    max_candidates: 50   # max entities to run cosine similarity against
  # Name variant configuration for within-article dedup and merge blocking
  # Uncomment and customize for your domain:
  # name_variants:
  #   organizations:
  #     equivalence_groups:
  #       - ["Full Name", "Abbreviation", "Alternate Name"]

# Performance / concurrency configuration (uncomment to enable parallelism)
# performance:
#   concurrency:
#     extract_workers: 8        # parallel articles in extraction phase
#     extract_per_article: 4    # parallel entity types within article
#     llm_in_flight: 16         # max concurrent cloud LLM calls
#     ollama_in_flight: 2       # max concurrent Ollama calls (local mode)
#   queue:
#     max_buffered_articles: 32  # backpressure limit for extraction -> merge

# Batching configuration (uncomment to tune embedding batch sizes)
# batching:
#   embed_batch_size: 64        # texts per embedding API call
#   embed_drain_timeout_ms: 100 # reserved for future async drain behaviour

# Caching configuration (uncomment to customize)
# cache:
#   enabled: true
#   embeddings:
#     lru_max_items: 4096
#   extraction:
#     enabled: true
#     subdir: "cache/extractions"
#     version: 1
#   match_check:
#     enabled: true
#     max_items: 8192
#   articles:
#     skip_if_unchanged: true

# Processing configuration
processing:
  # Enable relevance checking before extraction
  relevance_check: true
  
  # Batch size for processing articles
  batch_size: 5

# Embeddings configuration
embeddings:
  mode: cloud  # Options: auto, local, cloud, hybrid
  cloud:
    model: jina_ai/jina-embeddings-v3
    batch_size: 100
    max_retries: 3
    timeout: 30
  local:
    model: sentence-transformers/all-MiniLM-L6-v2
    batch_size: 32
    device: auto  # auto|cpu|cuda|mps